<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title></title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<style type="text/css">
/* padding for bootstrap navbar */
body {
padding-top: 50px;
padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar) */
.section h2 {
padding-top: 55px;
margin-top: -55px;
}
.section h3 {
padding-top: 55px;
margin-top: -55px;
}
/* don't use link color in navbar */
.dropdown-menu>li>a {
color: black;
}
/* some padding for disqus */
#disqus_thread {
margin-top: 45px;
}
p {
  text-align: justify;
}
img.centered {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
</style>
<link rel="stylesheet" href="libs/font-awesome-4.1.0/css/font-awesome.min.css"/>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; }
code > span.dt { color: #dfdfbf; }
code > span.dv { color: #dcdccc; }
code > span.bn { color: #dca3a3; }
code > span.fl { color: #c0bed1; }
code > span.ch { color: #dca3a3; }
code > span.st { color: #cc9393; }
code > span.co { color: #7f9f7f; }
code > span.ot { color: #efef8f; }
code > span.al { color: #ffcfaf; }
code > span.fu { color: #efef8f; }
code > span.er { color: #c3bf9f; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46129458-3', 'auto');
  ga('send', 'pageview');

</script>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Flammability</a>
      </div>
      <div class="navbar-collapse collapse navbar-responsive-collapse">
        <ul class="nav navbar-nav">
          <li><a href="index.html">Overview</a></li>

          <li class="dropdown">
            <a href="data-prep" class="dropdown-toggle" data-toggle="dropdown">Data Prep <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="clim_prep.html">Climate data prep</a></li>
              <li><a href="clim_resample_2km_1km.html">clim_resample_2km_1km.R</a></li>
              <li><a href="clim_1km_clip2ak.html">clim_1km_clip2ak.R</a></li>
              <li><a href="tpByVeg_CRU32.html">tpByVeg_CRU32.R</a></li>
              <li><a href="tpByVeg_CMIP5.html">tpByVeg_CMIP5.R</a></li>
              <li><a href="tpByVeg_plots.html">tpByVeg_plots.R</a></li>
            </ul>

          <li class="dropdown">
            <a href="gbm-flammability" class="dropdown-toggle" data-toggle="dropdown">GBM Flammability <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">GBM Modeling</li>
              <li><a href="baByVeg_historical.html">baByVeg_historical.R</a></li>
              <li><a href="gbm_modeling_flammability.html">gbm_modeling_flammability.R</a></li>
              <li><a href="gbm_modeling_lightning.html">gbm_modeling_lightning.R</a></li>
              <li><a href="gbm_lightning_coefficients.html">gbm_lightning_coefficients.R</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Flammability maps</li>
              <li><a href="gbm_flam_prep.html">gbm_flam_prep.R</a></li>
              <li><a href="gbm_flam_maps.html">gbm_flam_maps.R</a></li>
              <li><a href="gbm_flam_maps2.html">gbm_flam_maps2.R</a></li>
              <li><a href="gbm_flam_comparisons.html">gbm_flam_comparisons.R</a></li>
              <li><a href="flam_dist.html">flam_dist.R</a></li>
              <li><a href="flam_trunc.html">flam_trunc.R</a></li>
              <li><a href="FlammabilityMapMultipliers.html">FlammabilityMapMultipliers.R</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">ALFRESCO prep</li>
              <li><a href="duplicate_flam_maps.html">duplicate_flam_maps.R</a></li>
              <li><a href="alf_gcmRuns_inputPrep.html">alf_gcmRuns_inputPrep.R</a></li>
            </ul>

          <li class="dropdown">
            <a href="alfresco" class="dropdown-toggle" data-toggle="dropdown">ALFRESCO <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">Main scripts</li>
              <li><a href="AlfrescoCalibration.html">AlfrescoCalibration.R</a></li>
              <li><a href="AlfrescoFRP.html">AlfrescoFRP.R</a></li>
              <li><a href="fsByVeg.html">fsByVeg.R</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Supporting scripts</li>
              <li><a href="obs_fire_setup.html">obs_fire_setup.R</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Functions</li>
              <li><a href="histPrep.html">histPrep.R</a></li>
              <li><a href="fireSizePlot.html">fireSizePlot.R</a></li>
              <li><a href="AByearPlot.html">AByearPlot.R</a></li>
              <li><a href="CABvsFSPlot.html">CABvsFSPlot.R</a></li>
              <li><a href="CABvsTimePlot.html">CABvsTimePlot.R</a></li>
            </ul>

          <li class="dropdown">
            <a href="statistics" class="dropdown-toggle" data-toggle="dropdown">Statistics <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">Fire size distributions</li>
              <li><a href="fs_eda1.html">EDA: fire samples</a></li>
              <li><a href="fs_eda2.html">EDA: Noatak shrub fire</a></li>
              <li><a href="fs_eda3.html">EDA: statewide forest fire</a></li>
              <li class="divider"></li>
              <li><a href="fs_mle1.html">MLE: setup</a></li>
              <li><a href="fs_mle2.html">MLE: Noatak shrub fire</a></li>
              <li><a href="fs_mle3.html">MLE: statewide forest fire</a></li>
            </ul>

          <li class="dropdown">
            <a href="apps" class="dropdown-toggle" data-toggle="dropdown">Apps <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li class="dropdown-header">ALFRESCO launcher</li>
              <li><a href="appcode_alf_global.html">global.R</a></li>
              <li><a href="appcode_alf_ui.html">ui.R</a></li>
              <li><a href="appcode_alf_server.html">server.R</a></li>
              <li><a href="appcode_alf_sidebar.html">sidebar.R</a></li>
              <li><a href="appcode_alf_reactives.html">reactives.R</a></li>
              <li><a href="appcode_alf_about.html">about.R</a></li>
              <li class="divider"></li>
              <li class="dropdown-header">Results app</li>
              <li><a href="appcode_frp_ui.html">ui.R</a></li>
              <li><a href="appcode_frp_server.html">server.R</a></li>
              <li><a href="appcode_frp_sidebar.html">sidebar.R</a></li>
              <li><a href="appcode_frp_app.html">app.R</a></li>
              <li><a href="appcode_frp_reactives.html">reactives.R</a></li>
              <li><a href="appcode_frp_plotFunctions.html">plotFunctions.R</a></li>
              <li><a href="appcode_frp_about.html">about.R</a></li>
            </ul>

          <li><a href="https://leonawicz.github.io">All Projects</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <a class="btn btn-link" href="https://github.com/leonawicz/Flammability">
            <i class="fa fa-github fa-lg"></i>
            Github
          </a>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>



<div id="section" class="section level2">
<h2></h2>
</div>
<div id="section-1" class="section level2">
<h2></h2>
</div>
<div id="gbm_modeling_lightning.r" class="section level2">
<h2>gbm_modeling_lightning.R</h2>
<p>The <code>gbm_modeling_lightning.R</code> script models backcast and forecast lightning strike frequency over Alaska from 1950 projected through 2099. A lightning model is fitted using stochastic gradient boosting (GBM: generalized boosted regression models, or gradient boosting machine). The script assembles data for modeling, performs the modeling, and saves results to a workspace file to be read and utilized by other scripts, e.g., <code>gbm_lightning_coefficients.R</code>.</p>
<p>The observed period is small (n = 9 years), due to limitations in comparable observations resulting from changes in the lightning detection network prior to 2003 and after 2011. The sample size for the strike data over this time period is large. Some details can be found below.</p>
</div>
<div id="lightning-as-a-function-of-climate" class="section level2">
<h2>Lightning as a function of climate</h2>
<ul>
<li>Lightning: Response variable</li>
<li>All positive-polarized lightning strikes, sample size n = 172,633 strikes.</li>
<li>Annual strike frequency over the domain during the observational period ranges from 7,878 to 32,129 strikes per year.</li>
<li>Annual average is 19,181 strikes.</li>
<li>Estimated average annual strike frequency is 14,043 strikes during the 1950s and 33,903 strikes during the 2090s.</li>
</ul>
<div id="climate-predictor-variables-monthly-summer-temperature-and-precipitation." class="section level5">
<h5>Climate: Predictor variables, monthly summer temperature and precipitation.</h5>
</div>
<div id="spatial-domain-statewide-alaska-forested-areas-spruce-and-deciduous." class="section level5">
<h5>Spatial domain: statewide Alaska forested areas (spruce and deciduous).</h5>
</div>
<div id="temporal-domain-summer-june-july-august-total-strike-frequency-2003---2011." class="section level5">
<h5>Temporal domain: Summer (June + July + August total strike frequency), 2003 - 2011.</h5>
</div>
<div id="notes" class="section level5">
<h5>Notes:</h5>
<ul>
<li><p>Changes to the lightning detection network prior to 2003 and after 2011 limit the series of comparable samples.</p></li>
<li>A GBM model estimates lightning strike frequency over the domain as a function of climate.</li>
<li>Use of climate provides the opportunity to model annual lightning strike frequency backcasts and future projections over the domain using CRU 3.2 and CMIP5 GCM climate outputs.</li>
<li>Given the lightning sample size, much information is aggregated into each total statewide summer lightning frequency.</li>
<li><p>The model will likely be improved upon with additional data, climate scenarios, assessment of GBM model uncertainty (currently only GCM uncertainty is included), as well as deeper explorations of the nonlinear climate-lightning linkage itself.</p></li>
</ul>
</div>
</div>
<div id="section-2" class="section level2">
<h2></h2>
</div>
<div id="section-3" class="section level2">
<h2></h2>
</div>
<div id="r-code" class="section level2">
<h2>R code</h2>
<div id="setup" class="section level3">
<h3>Setup</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(data.table)
<span class="kw">library</span>(reshape2)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(gbm)

<span class="co"># climate data</span>
<span class="kw">setwd</span>(<span class="st">&quot;C:/github/Flammability/workspaces/tpByVeg&quot;</span>)
<span class="kw">load</span>(<span class="st">&quot;tpByVeg_means_CRU32_individual.RData&quot;</span>)
X &lt;-<span class="st"> </span>d
<span class="kw">load</span>(<span class="st">&quot;tpByVeg_means_CMIP5_individual.RData&quot;</span>)
X &lt;-<span class="st"> </span><span class="kw">rbind</span>(X, d)
<span class="kw">rm</span>(d)

X &lt;-<span class="st"> </span>X %&gt;%<span class="st"> </span><span class="kw">filter</span>(Vegetation ==<span class="st"> &quot;forest&quot;</span>) %&gt;%<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Month =</span> <span class="kw">factor</span>(Month, <span class="dt">levels =</span> month.abb), 
    <span class="dt">Var =</span> <span class="kw">substr</span>(Var, <span class="dv">1</span>, <span class="dv">1</span>)) %&gt;%<span class="st"> </span><span class="kw">group_by</span>(Scenario, Model, Year, Month, Var) %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">summarise</span>(<span class="dt">Val =</span> <span class="kw">mean</span>(Val)) %&gt;%<span class="st"> </span><span class="kw">dcast</span>(Scenario +<span class="st"> </span>Model +<span class="st"> </span>Year ~<span class="st"> </span>Month +<span class="st"> </span>Var, 
    <span class="dt">value.var =</span> <span class="st">&quot;Val&quot;</span>) %&gt;%<span class="st"> </span><span class="kw">data.table</span>()
<span class="kw">setnames</span>(X, <span class="kw">gsub</span>(<span class="st">&quot;_&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="kw">names</span>(X)))

<span class="co"># fire and lightning data</span>
<span class="kw">load</span>(<span class="st">&quot;../gbmFlammability/baByVeg_historical_1950_2013.RData&quot;</span>)  <span class="co"># burn area (km^2) by veg class, contains d.ba.pct.noatak and d.ba.pct.sw</span>
light.yrs &lt;-<span class="st"> </span><span class="dv">2003</span>:<span class="dv">2011</span>
lightning.current &lt;-<span class="st"> </span><span class="kw">filter</span>(X, Model ==<span class="st"> &quot;CRU32&quot;</span> &amp;<span class="st"> </span>Year %in%<span class="st"> </span>light.yrs)
lightning.current$Positive.Strokes &lt;-<span class="st"> </span>lightning.obs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">9792</span>, <span class="dv">37067</span>, <span class="dv">28793</span>, 
    <span class="dv">11632</span>, <span class="dv">32129</span>, <span class="dv">15601</span>, <span class="dv">14318</span>, <span class="dv">15423</span>, <span class="dv">7878</span>)  <span class="co"># 2003-2011 AK SW forest positive strikes</span>
lightning.current$ba &lt;-<span class="st"> </span><span class="kw">with</span>(d.ba.pct.sw, total[Year %in%<span class="st"> </span>light.yrs])</code></pre>
</div>
</div>
<div id="section-4" class="section level2">
<h2></h2>
</div>
<div id="section-5" class="section level2">
<h2></h2>
<div id="gbm" class="section level3">
<h3>GBM</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># gbm modeling</span>
gbm.light &lt;-<span class="st"> </span><span class="kw">gbm</span>(Positive.Strokes ~<span class="st"> </span>JunP +<span class="st"> </span>JulP +<span class="st"> </span>AugP +<span class="st"> </span>JunT +<span class="st"> </span>JulT +<span class="st"> </span>AugT, 
    <span class="dt">distribution =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="dt">bag.fraction =</span> <span class="fl">0.9</span>, <span class="dt">cv.folds =</span> <span class="dv">5</span>, <span class="dt">weights =</span> <span class="kw">sqrt</span>(lightning.current$Positive.Strokes), 
    <span class="dt">data =</span> lightning.current, <span class="dt">verbose =</span> F, <span class="dt">interaction.depth =</span> <span class="dv">2</span>, <span class="dt">n.minobsinnode =</span> <span class="dv">2</span>, 
    <span class="dt">n.trees =</span> <span class="dv">500</span>, <span class="dt">shrinkage =</span> <span class="fl">0.025</span>)

<span class="co"># plots win.graph(height=6, width=8)</span>
tmp.inf &lt;-<span class="st"> </span><span class="kw">summary</span>(gbm.light)</code></pre>
<p><img src="gbm_modeling_lightning_files/figure-html/gbm-1.png" /></p>
<pre class="sourceCode r"><code class="sourceCode r">tmp.inf[<span class="kw">order</span>(tmp.inf$var), ]</code></pre>
<pre><code>##       var    rel.inf
## AugP AugP  7.6496813
## AugT AugT 50.5180437
## JulP JulP  0.7154789
## JulT JulT  3.2653273
## JunP JunP  3.9475620
## JunT JunT 33.9039069</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">best.iter &lt;-<span class="st"> </span><span class="kw">gbm.perf</span>(gbm.light, <span class="dt">method =</span> <span class="st">&quot;cv&quot;</span>)</code></pre>
<p><img src="gbm_modeling_lightning_files/figure-html/gbm-2.png" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(best.iter)</code></pre>
<pre><code>## [1] 499</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">X$LightPred &lt;-<span class="st"> </span><span class="kw">predict</span>(gbm.light, <span class="dt">newdata =</span> X, <span class="dt">n.trees =</span> best.iter)
X.cru32 &lt;-<span class="st"> </span><span class="kw">filter</span>(X, Model ==<span class="st"> &quot;CRU32&quot;</span>)

<span class="co"># win.graph()</span>
<span class="kw">plot</span>(lightning.current$Year, lightning.current$Positive.Strokes, <span class="dt">pch =</span> <span class="st">&quot;&quot;</span>, <span class="dt">cex.lab =</span> <span class="fl">1.3</span>, 
    <span class="dt">cex.axis =</span> <span class="fl">1.3</span>, <span class="dt">main =</span> <span class="st">&quot;Positive Lightning Strikes&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;&quot;</span>, 
    <span class="dt">las =</span> <span class="dv">1</span>, <span class="dt">xlim =</span> <span class="kw">range</span>(X$Year), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">7000</span>, <span class="dv">43000</span>))
models &lt;-<span class="st"> </span><span class="kw">unique</span>(X$Model[X$Scenario !=<span class="st"> &quot;historical&quot;</span>])  <span class="co"># GCM predictions</span>
for (k in <span class="dv">1</span>:<span class="dv">5</span>) {
    dsub &lt;-<span class="st"> </span><span class="kw">filter</span>(X, Model ==<span class="st"> </span>models[k] &amp;<span class="st"> </span>Scenario %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;historical&quot;</span>, <span class="st">&quot;rcp60&quot;</span>))
    <span class="kw">lines</span>(dsub$Year, dsub$LightPred, <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, <span class="dt">cex =</span> <span class="fl">1.7</span>, <span class="dt">lwd =</span> <span class="fl">2.5</span>, <span class="dt">lty =</span> <span class="dv">2</span>)
}
<span class="kw">lines</span>(d.ba.pct.sw$Year, <span class="dv">200</span> *<span class="st"> </span><span class="kw">sqrt</span>(d.ba.pct.sw$total) +<span class="st"> </span><span class="dv">9000</span>, <span class="dt">col =</span> <span class="dv">2</span>, <span class="dt">cex =</span> <span class="fl">1.7</span>, 
    <span class="dt">lwd =</span> <span class="dv">2</span>)  <span class="co"># scaled observed fire</span>
<span class="kw">lines</span>(lightning.current$Year, lightning.current$Positive.Strokes, <span class="dt">col =</span> <span class="dv">3</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)  <span class="co"># observed strikes</span>
<span class="kw">points</span>(lightning.current$Year, lightning.current$Positive.Strokes, <span class="dt">pch =</span> <span class="dv">21</span>, 
    <span class="dt">bg =</span> <span class="dv">3</span>, <span class="dt">cex =</span> <span class="fl">1.7</span>, <span class="dt">col =</span> <span class="dv">1</span>)
<span class="kw">points</span>(X.cru32$Year, X.cru32$LightPred, <span class="dt">pch =</span> <span class="st">&quot;*&quot;</span>, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">cex =</span> <span class="dv">2</span>, <span class="dt">lty =</span> <span class="dv">2</span>)  <span class="co"># CRU 3.2 predictions</span>
<span class="kw">lines</span>(X.cru32$Year, X.cru32$LightPred, <span class="dt">col =</span> <span class="dv">1</span>, <span class="dt">cex =</span> <span class="fl">1.7</span>, <span class="dt">lwd =</span> <span class="fl">2.5</span>, <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">legend</span>(<span class="st">&quot;bottomright&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;Obs.&quot;</span>, <span class="st">&quot;CRU&quot;</span>, <span class="st">&quot;GCM&quot;</span>, <span class="st">&quot;Fire&quot;</span>), <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;black&quot;</span>, 
    <span class="st">&quot;gray&quot;</span>, <span class="st">&quot;red&quot;</span>), <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">lty =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">horiz =</span> T, <span class="dt">bty =</span> <span class="st">&quot;n&quot;</span>)</code></pre>
<p><img src="gbm_modeling_lightning_files/figure-html/gbm-3.png" /></p>
</div>
</div>

<!-- some extra javascript for older browsers -->
<script type="text/javascript" src="libs/polyfill.js"></script>
<script>
  // manage active state of menu based on current page
  $(document).ready(function () {
  
    // active menu
    href = window.location.pathname
    href = href.substr(href.lastIndexOf('/') + 1)
    $('a[href="' + href + '"]').parent().addClass('active');
    
    // manage active menu header
    if (href.startsWith('authoring_'))
      $('a[href="' + 'authoring' + '"]').parent().addClass('active');
    else if (href.endsWith('_format.html'))
      $('a[href="' + 'formats' + '"]').parent().addClass('active');
    else if (href.startsWith('developer_'))
      $('a[href="' + 'developer' + '"]').parent().addClass('active');
	  
  });
</script>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
